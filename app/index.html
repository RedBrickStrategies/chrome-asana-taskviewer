<!doctype html>
<html ng-app="asanaChromeApp" ng-csp="">
    <head>
        <meta charset="utf-8">
        <title>test</title>

        <!-- build:css styles/vendor.css -->
        <!-- bower:css -->
        <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
        <link rel="stylesheet" href="bower_components/angular-notify/dist/angular-notify.css" />
        <!-- endbower -->
        <!-- endbuild -->

        <!-- build:css styles/main.css -->
        <link rel="stylesheet" href="bower_components/angular/angular-csp.css" />
        <link rel="stylesheet" href="styles/bootstrap-paper-theme.min.css">
        <link rel="stylesheet" href="styles/main.css">
        <!-- endbuild -->
    </head>
    <body ng-controller="MainController">
        <div class="container">
            <div role="tabpanel">

              <!-- Nav tabs -->
              <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" ng-show="userPrefs.taskContext.length > 0"><a href="#" ng-click="reduceContext()" title="{{userPrefs.contextText}}"><i class="glyphicon glyphicon-chevron-left"></i>&nbsp; {{userPrefs.contextText | limitTo:6 }}...</a></li>
                <li role="presentation" class="active"><a href="#tasks-tab" aria-controls="tasks-tab" role="tab" data-toggle="tab">Tasks</a></li>
                <li role="presentation"><a href="#settings-tab" aria-controls="settings-tab" role="tab" data-toggle="tab"><i class="glyphicon glyphicon-cog"></i></a></li>
                <li role="presentation"><a href="#" ng-click="refresh()"><i class="glyphicon glyphicon-refresh"></i></a></li>
                <li role="presentation"><a id="move-tab"><i class="glyphicon glyphicon-move"></i></a></li>
                <li role="presentation" ng-show="asana.loading > 0"><div class="loading"></div></li>
              </ul>

              <!-- Tab panes -->
              <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="tasks-tab">
                    <ul id="tasks" ng-show="tasks.length > 0">
                        <li ng-repeat="item in tasks | filter:userPrefs.taskFilter as filteredTasks track by item.id" id="item{{item.id}}" ng-class="{ 'show-detail': item.showDetails }">
                            <div data-item="item" data-project="userPrefs.selectedProject"></div>
                        </li>
                    </ul>
                    <p ng-show="tasks.length <= 0">No tasks in selected project. Change workspace or project using the settings tab.</p>
                    <p ng-show="tasks.length > 0 && filteredTasks.length <= 0">No tasks match the current filters.</p>
                </div>
                <div role="tabpanel" class="tab-pane" id="settings-tab">
                    <div class="row">
                        <div class="col-md-12">
                            <label>Select Workspace:</label>
                            <select id="workspace" class="form-control" ng-model="userPrefs.selectedWorkspace" ng-change="changeWorkspace(userPrefs.selectedWorkspace)">
                                <option ng-repeat="workspace in asana.workspaces" ng-selected="workspace.isSelected" value="{{workspace.id}}">{{workspace.name}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <label>Select Project:</label>
                            <select id="workspace" class="form-control" ng-model="userPrefs.selectedProject" ng-change="changeProject(userPrefs.selectedProject)">
                                <option ng-repeat="project in asana.projects" ng-selected="project.isSelected" value="{{project.id}}">{{project.name}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <label>Show:</label>
                            <select ng-model="userPrefs.taskFilterCompleted" ng-change="adjustFilter()" class="form-control">
                                <option value="all">All Completed and Incomplete Tasks</option>
                                <option value="todo">Tasks to do </option>
                                <option value="completed">Completed Tasks</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <label>Filter status:</label>
                            <select ng-model="userPrefs.taskFilterStatus" ng-change="adjustFilter()" class="form-control">
                                <option value="all">No Filter</option>
                                <option value="inbox">Inbox</option>
                                <option value="late">Later</option>
                                <option value="today">Today</option>
                                <option value="upcoming">Upcoming</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <label>Filter Assigned:</label>
                            <select ng-model="userPrefs.taskFilterAssigned" class="form-control" ng-change="adjustFilter()" ng-disabled="userPrefs.selectedProject == 0">
                                <option ng-repeat="user in asana.team" ng-selected="user.isSelected" value="{{user.id}}">
                                    {{user.name}}
                                </option>
                                
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <label>API Key:</label>
                            <div class="input-group">
                                <input type="text" ng-model="userPrefs.apiKey" class="form-control comment" placeholder="Please enter your API key" />
                                <div class="input-group-btn">
                                    <button class="btn btn-sm btn-info" ng-click="saveApiKey()"><i class="glyphicon glyphicon-save"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
            <div class="footer">2014 <a href="http://marketlytics.com" target="_blank">@marketlytics</a> - use  &#8984; +  &#8679; + 5 to toggle the app</div>
        </div>

        <!-- incase of weird js errors replace lodash.compact with loadash.min -->
        <!-- build:js scripts/vendor.js -->
        <!-- bower:js -->
        <script src="bower_components/jquery/dist/jquery.js"></script>
        <script src="bower_components/lodash/dist/lodash.min.js"></script>
        <script src="bower_components/angular/angular.js"></script>
        <script src="bower_components/restangular/dist/restangular.js"></script>
        <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
        <script src="bower_components/angular-base64/angular-base64.js"></script>
        <script src="bower_components/chrome-platform-analytics/google-analytics-bundle.js"></script>
        <script src="bower_components/angular-notify/dist/angular-notify.js"></script>
        <script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
        <!-- endbower -->
        <!-- endbuild -->
        
        <!-- build:js scripts/index.js -->
        <script src="scripts/chrome.js"></script>
        <script src="scripts/index.js"></script>
        <script src="scripts/controllers/main.js"></script>
        <script src="scripts/controllers/item.js"></script>
        <script src="scripts/directives/item.js"></script>
        <script src="scripts/directives/tooltip.js"></script>
        <script src="scripts/services/asana.js"></script>
        <script src="scripts/filters/initials.js"></script>
        <script src="scripts/filters/attachment.js"></script>
        <script src="scripts/filters/appendNames.js"></script>
        <!-- endbuild -->

    </body>
</html>
